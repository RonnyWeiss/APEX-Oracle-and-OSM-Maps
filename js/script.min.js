var apexOracleOSMMaps=function(){"use strict";var e={version:"1.2.7",isDefinedAndNotNull:function(e){return void 0!==e&&null!==e},isAPEX:function(){return"undefined"!=typeof apex},debug:{info:function(r){e.isAPEX()&&apex.debug.info(r)},error:function(r){e.isAPEX()?apex.debug.error(r):console.error(r)}},link:function(e,r){if(!r)return window.location=e;window.open(e,"_blank")},loader:{start:function(r,n){if(n||$(r).css("min-height","100px"),e.isAPEX())apex.util.showSpinner($(r));else{var a=$("<span></span>");a.attr("id","loader"+r),a.addClass("ct-loader");var o=$("<i></i>");o.addClass("fa fa-refresh fa-2x fa-anim-spin"),o.css("background","rgba(121,121,121,0.6)"),o.css("border-radius","100%"),o.css("padding","15px"),o.css("color","white"),a.append(o),$(r).append(a)}},stop:function(e){$(e+" > .u-Processing").remove(),$(e+" > .ct-loader").remove()}},noDataMessage:{show:function(e,r){var n=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0").addClass("nodatafoundmessage"),a=$("<div></div>"),o=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");a.append(o);var s=$("<span></span>").text(r).css("display","block").css("color","#707070").css("font-size","12px");n.append(a).append(s),$(e).append(n)},hide:function(e){$(e).children(".nodatafoundmessage").remove()}},jsonSaveExtend:function(e,r){var n={},a={};if("string"==typeof r)try{a=JSON.parse(r)}catch(e){console.error("Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used."),console.error(e),console.error(r)}else a=r;try{n=$.extend(!0,e,a)}catch(r){console.error("Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.error(r),n=e,console.error(n)}return n},getLanguage:function(){return e.isAPEX()?apex.locale.getLanguage():navigator.language||navigator.userLanguage||en}};return{initialize:function(r,n,a,o,s,i,t){function d(r){c.empty(),e.debug.info({data:r});var n=g.map.longitude,a=g.map.latitude,o=g.map.zoom;if("oracle"===t){OM.gv.setResourcePath(i+"/jslib/v2.3/"),OM.gv.setBaseMapViewerURL(i),OM.Map.setLocale(e.getLanguage()),e.debug.info({map:OM});var s=new OM.universe.Universe({srid:8307,bounds:new OM.geometry.Rectangle(-180,-65,180,65,8307),numberOfZoomLevels:5}),d=document.getElementById(A),l={mapviewerURL:i,universe:s},u=new OM.Map(d,l),M=new OM.layer.ElocationTileLayer("map"),E={def:{type:OM.layer.VectorLayer.TYPE_LOCAL}},L=new OM.layer.VectorLayer("vectors",E);r.row&&r.row.length>0&&$.each(r.row,function(r,s){0===r&&(e.isDefinedAndNotNull(s.MAP_LONGITUDE)&&(isNaN(s.MAP_LONGITUDE)?(e.debug.error("MAP_LONGITUDE is not a number"),e.debug.error([s.MAP_LONGITUDE])):n=s.MAP_LONGITUDE),e.isDefinedAndNotNull(s.MAP_LATITUDE)&&(isNaN(s.MAP_LATITUDE)?(e.debug.error("MAP_LATITUDE is not a number"),e.debug.error([s.MAP_LATITUDE])):a=s.MAP_LATITUDE),e.isDefinedAndNotNull(s.MAP_ZOOM)&&(isNaN(s.MAP_ZOOM)?(e.debug.error("MAP_ZOOM is not a number"),e.debug.error([s.MAP_ZOOM])):o=s.MAP_ZOOM));var i;if(e.isDefinedAndNotNull(s.MARKER_LABEL)&&(i=s.MARKER_LABEL.toString()),isNaN(s.MARKER_LATITUDE))e.debug.error("MARKER_LATITUDE is not a number"),e.debug.error([s.MARKER_LATITUDE]);else if(isNaN(s.MARKER_LONGITUDE))e.debug.error("MARKER_LONGITUDE is not a number"),e.debug.error([s.MARKER_LONGITUDE]);else{var t=new OM.geometry.Point(s.MARKER_LONGITUDE,s.MARKER_LATITUDE),d=new OM.Feature(s.MARKER_LABEL||r,t,{label:i,renderingStyle:new OM.style.Marker({src:s.MARKER_URL||g.marker.url,width:s.MARKER_WIDTH||g.marker.width,height:s.MARKER_HEIGHT||g.marker.height})});L.addFeature(d),e.isDefinedAndNotNull(s.MARKER_LINK)&&d.addListener("click",function(){e.link(s.MARKER_LINK)})}}),L.setLabelsVisible(g.marker.labels),u.addLayer(M),u.addLayer(L);var p=new OM.geometry.Point(n,a,8307);u.setMapCenterAndZoomLevel(p,o,!0),u.init()}else{var f=new OpenLayers.Layer.OSM.Mapnik("Mapnik");function N(e){return 20037508.34*e/180}function O(e){return 20037508.34*(e=Math.log(Math.tan(3.141592653589793*(90+e)/360))/.017453292519943295)/180}OpenLayers.Lang.setCode(e.getLanguage()),u=new OpenLayers.Map(A,{projection:new OpenLayers.Projection("EPSG:900913"),displayProjection:new OpenLayers.Projection("EPSG:4326"),maxExtent:new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),numZoomLevels:18,maxResolution:156543,units:"meters"}),r.row&&r.row.length>0&&$.each(r.row,function(r,s){0===r&&(e.isDefinedAndNotNull(s.MAP_LONGITUDE)&&(isNaN(s.MAP_LONGITUDE)?(e.debug.error("MAP_LONGITUDE is not a number"),e.debug.error([s.MAP_LONGITUDE])):n=s.MAP_LONGITUDE),e.isDefinedAndNotNull(s.MAP_LATITUDE)&&(isNaN(s.MAP_LATITUDE)?(e.debug.error("MAP_LATITUDE is not a number"),e.debug.error([s.MAP_LATITUDE])):a=s.MAP_LATITUDE),e.isDefinedAndNotNull(s.MAP_ZOOM)&&(isNaN(s.MAP_ZOOM)?(e.debug.error("MAP_ZOOM is not a number"),e.debug.error([s.MAP_ZOOM])):o=s.MAP_ZOOM));var i=new OpenLayers.Layer.Markers("Address",{projection:new OpenLayers.Projection("EPSG:4326"),visibility:!0,displayInLayerSwitcher:!1});isNaN(s.MARKER_LATITUDE)?(e.debug.error("MARKER_LATITUDE is not a number"),e.debug.error([s.MARKER_LATITUDE])):isNaN(s.MARKER_LONGITUDE)?(e.debug.error("MARKER_LONGITUDE is not a number"),e.debug.error([s.MARKER_LONGITUDE])):function(r,n,a,o,s,i,t,d){var l=new OpenLayers.LonLat(N(n),O(a)),A=s||g.marker.width,u=i||g.marker.height,c=new OpenLayers.Size(A,u),M=new OpenLayers.Pixel(-c.w/2,-c.h),E=o||g.marker.url,L=new OpenLayers.Icon(E,c,M),p=new OpenLayers.Feature(r,l),f=new OpenLayers.Marker(l,L);e.isDefinedAndNotNull(d)&&(f.icon.imageDiv.title=d),f.feature=p,r.addMarker(f),e.isDefinedAndNotNull(t)&&f.events.register("click",r,function(){e.link(t)})}(i,s.MARKER_LONGITUDE,s.MARKER_LATITUDE,s.MARKER_URL,s.MARKER_WIDTH,s.MARKER_HEIGHT,s.MARKER_LINK,s.MARKER_LABEL),u.addLayers([f,i])});var w=N(n),R=O(a);u.setCenter(new OpenLayers.LonLat(w,R),o+1),c.find(".olControlAttribution").css("bottom","5px")}}function l(){e.loader.start(c);var r=o;apex.server.plugin(n,{pageItems:r},{success:d,error:function(r){c.empty(),console.log(r.responseText),e.noDataMessage.show("#"+A,"Error occured!")},dataType:"json"})}var A=r+"-c",u=$("#"+r);if(u.length>0){var g={};g=e.jsonSaveExtend({refresh:0,height:"600px",map:{longitude:0,latitude:0,zoom:1},marker:{height:54,width:54,labels:!1,url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEeElEQVRogcWZT2hdRRTGf/cRQhYhBAmlhC5CkRBCKCEqVBcSShTRLkSKiJQiLooLF+JCgohQXHThyoVIESkSsuiqiBTRIiolipQS/NcWJG0lVKvV1lBriGnO52LmNjc3d+579915fQeGN+/CzHzfme/MPXNuQk2T+xkAdgOjwEPAFDDsnwP8C1wDvgfOAueBS8CNBKwuhrZNMGhwwOCYYMlgXaB8s63/NwRXBfMGL8oR7Qr4CYNTBr97UNuAlzVz7abBgmBG0LhXwHcKjhjczHs31G+h3TZ435wEOwp+h2BecDsi+LStCz4XjHcS/HEFdB6xfRqdhJfNXChIfVs1uOB36KBgSrBLMGwuXp6RC/ZzBitNdu0LwVg0AgZvpLIJtF8MXhfsEfSUOKIhGBEcNlgsCf4NwYdRAlswZvBXaCGDrwT7BL0V5mwIJv1urQV2Y9Vgf13wAwYnbfPYy3vpuGBnjfn7BG8arBXJyZzcRuoQ2C+4GjhVztQBnyVhTi7b5GRwy+DlMlmWTdwveCeg02XBTF3wmbUmBN8GAvqjthwlGBf8VOCVNYMjVTTfzMytdyiNNdsqoxXBdGhsWZTvFtxf8PxKAh8n8F9d4DkQnwEXBSS++f4A8GCTsYU2mXgva+vz87isMrZdS+DLJPMg0384NKiMwAMFE5HA6Zjez61xCpzDUqf5/mRoXBmBUOBcrIyudSuSEJSk3EECgv5MP2t/1EHYxP5O4E76J9n87QsNCJ6vAS3eE0sdlmz2g7e2shfEjcDzoXZAtWgDgp7UYRkJ/RMaUBYDl9JOTkKdvHSMFu28MljyVkZgIT+Rn+yxmC+xzLwAT6X97CmUwNehcWVB/KPgz/zzBCbozK1pCJguOIXuAGdCg4IEEvg18S+snIRGgCfaSrAC5iN0HzBeIKErci/PaiboEcwKVgvy9SXBo7WRezMYlbtX5POuDcF72qwvVSaxV/BzJrHKLnBacF8E8L0e5HrBneC64Dk1nyZIoE8wV5BOpxead+uQ8OBflSurFN2PFwx2tDt/SmLCwgtsCD4RPFIlJnz6PC53yV8tcdCBWuAzJE4UxMHdX4MLBq/IabnsZEMwLFe1WAjIJm2LKkkhqhKYlqtnBus5BrcE33mvPi0YNRiUe7uOCB4XvC34RpmLSxF4c7tyKAp4T6BP8FbgRGrar9J87WlOsVMWwZjgbBXgbfYvy5Vp4ppBw5x22/Fqlf7RaNoPEJm3TKUipoTM7XDnwHsCk4LFDkhoWXUrca2YoNfgsMLlxnYktOql098cQRwSPYKj5mqjMSR0QhHSkqokhvznoboSuqyYpfSKJGY8gHYltGLwQlfAewINuWzxt6oS8oXb1zp+6rRAok8wW5Ryl/UNPlBnCwStm1y+c7KChH5Qt74Ph0ywy1wpfD0kIf8CPCfY022820yuTcllmyHZLAmeVMT7dFTzQb3X/EfwHJF1g2fVgZJMdJPL/ZcyJK4LXuo2rpbN33WfFyz73ZhVu5WFbpk/Xg/KfYUc7NQ6/wPXO1op+IbpEgAAAABJRU5ErkJggg=="}},a);var c=function(e){var r=$("<div></div>");return r.addClass("aom-container"),r.attr("id",A),r.height(g.height),e.append(r),r}(u);l();try{apex.jQuery("#"+s).bind("apexrefresh",function(){0==c.children("span").length&&l()})}catch(e){console.log("Can't bind refresh event on "+s+". Apex is missing"),console.log(e)}g.refresh>0&&setInterval(function(){0==c.children("span").length&&l()},1e3*g.refresh)}else console.log("Can't find parentID: "+r)}}}();