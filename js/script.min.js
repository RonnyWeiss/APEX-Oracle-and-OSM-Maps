var apexOracleOSMMaps=function(){"use strict";var e={version:"1.2.7",isDefinedAndNotNull:function(e){return void 0!==e&&null!==e},isAPEX:function(){return"undefined"!=typeof apex},debug:{info:function(n){e.isAPEX()&&apex.debug.info(n)},error:function(n){e.isAPEX()?apex.debug.error(n):console.error(n)}},link:function(e,n){if(!n)return window.location=e;window.open(e,"_blank")},loader:{start:function(n,r){if(r||$(n).css("min-height","100px"),e.isAPEX())apex.util.showSpinner($(n));else{var a=$("<span></span>");a.attr("id","loader"+n),a.addClass("ct-loader");var o=$("<i></i>");o.addClass("fa fa-refresh fa-2x fa-anim-spin"),o.css("background","rgba(121,121,121,0.6)"),o.css("border-radius","100%"),o.css("padding","15px"),o.css("color","white"),a.append(o),$(n).append(a)}},stop:function(e){$(e+" > .u-Processing").remove(),$(e+" > .ct-loader").remove()}},noDataMessage:{show:function(e,n){var r=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0").addClass("nodatafoundmessage"),a=$("<div></div>"),o=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");a.append(o);var t=$("<span></span>").text(n).css("display","block").css("color","#707070").css("font-size","12px");r.append(a).append(t),$(e).append(r)},hide:function(e){$(e).children(".nodatafoundmessage").remove()}},jsonSaveExtend:function(e,n){var r={},a={};if("string"==typeof n)try{a=JSON.parse(n)}catch(e){console.error("Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used."),console.error(e),console.error(n)}else a=n;try{r=$.extend(!0,e,a)}catch(n){console.error("Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.error(n),r=e,console.error(r)}return r},getLanguage:function(){return e.isAPEX()?apex.locale.getLanguage():navigator.language||navigator.userLanguage||en}};return{initialize:function(n,r,a,o,t,s,i){function l(n){p.empty(),e.debug.info({data:n});var r=g.map.longitude,a=g.map.latitude,o=g.map.zoom;if("oracle"===i){OM.gv.setResourcePath(s+"/jslib/v2.3/"),OM.gv.setBaseMapViewerURL(s),OM.Map.setLocale(e.getLanguage()),e.debug.info({map:OM});var t=new OM.universe.Universe({srid:8307,bounds:new OM.geometry.Rectangle(-180,-65,180,65,8307),numberOfZoomLevels:5}),l=document.getElementById(c),d={mapviewerURL:s,universe:t},u=new OM.Map(l,d),A=new OM.layer.ElocationTileLayer("map"),f={def:{type:OM.layer.VectorLayer.TYPE_LOCAL}},w=new OM.layer.VectorLayer("vectors",f);n.row&&n.row.length>0&&$.each(n.row,function(n,t){0===n&&(e.isDefinedAndNotNull(t.MAP_LONGITUDE)&&(r=t.MAP_LONGITUDE),e.isDefinedAndNotNull(t.MAP_LATITUDE)&&(a=t.MAP_LATITUDE),e.isDefinedAndNotNull(t.MAP_ZOOM)&&(o=t.MAP_ZOOM));var s=new OM.geometry.Point(t.MARKER_LONGITUDE,t.MARKER_LATITUDE),i=new OM.Feature(t.MARKER_LABEL||n,s,{label:t.MARKER_LABEL.toString(),renderingStyle:new OM.style.Marker({src:t.MARKER_URL||g.marker.url,width:t.MARKER_WIDTH||g.marker.width,height:t.MARKER_HEIGHT||g.marker.height})});w.addFeature(i),e.isDefinedAndNotNull(t.MARKER_LINK)&&i.addListener("click",function(){e.link(t.MARKER_LINK)})}),w.setLabelsVisible(g.marker.labels),u.addLayer(A),u.addLayer(w);var L=new OM.geometry.Point(r,a,8307);u.setMapCenterAndZoomLevel(L,o,!0),u.init()}else{var M=new OpenLayers.Layer.OSM.Mapnik("Mapnik");function h(e){return 20037508.34*e/180}function E(e){return 20037508.34*(e=Math.log(Math.tan(3.141592653589793*(90+e)/360))/.017453292519943295)/180}OpenLayers.Lang.setCode(e.getLanguage()),u=new OpenLayers.Map(c,{projection:new OpenLayers.Projection("EPSG:900913"),displayProjection:new OpenLayers.Projection("EPSG:4326"),maxExtent:new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),numZoomLevels:18,maxResolution:156543,units:"meters"}),n.row&&n.row.length>0&&$.each(n.row,function(n,t){0===n&&(e.isDefinedAndNotNull(t.MAP_LONGITUDE)&&(r=t.MAP_LONGITUDE),e.isDefinedAndNotNull(t.MAP_LATITUDE)&&(a=t.MAP_LATITUDE),e.isDefinedAndNotNull(t.MAP_ZOOM)&&(o=t.MAP_ZOOM));var s=new OpenLayers.Layer.Markers("Address",{projection:new OpenLayers.Projection("EPSG:4326"),visibility:!0,displayInLayerSwitcher:!1});!function(n,r,a,o,t,s,i,l){var d=new OpenLayers.LonLat(h(r),E(a)),c=t||g.marker.width,u=s||g.marker.height,p=new OpenLayers.Size(c,u),A=new OpenLayers.Pixel(-p.w/2,-p.h),f=o||g.marker.url,w=new OpenLayers.Icon(f,p,A),L=new OpenLayers.Feature(n,d),M=new OpenLayers.Marker(d,w);M.icon.imageDiv.title=l,M.feature=L,n.addMarker(M),e.isDefinedAndNotNull(i)&&M.events.register("click",n,function(){e.link(i)})}(s,t.MARKER_LONGITUDE,t.MARKER_LATITUDE,t.MARKER_URL,t.MARKER_WIDTH,t.MARKER_HEIGHT,t.MARKER_LINK,t.MARKER_LABEL),u.addLayers([M,s])});var y=h(r),m=E(a);u.setCenter(new OpenLayers.LonLat(y,m),o+1),p.find(".olControlAttribution").css("bottom","5px")}}function d(){e.loader.start(p);var n=o;apex.server.plugin(r,{pageItems:n},{success:l,error:function(n){p.empty(),console.log(n.responseText),e.noDataMessage("#"+c,"Error occured!")},dataType:"json"})}var c=n+"-c",u=$("#"+n);if(u.length>0){var g={};g=e.jsonSaveExtend({refresh:0,height:"600px",map:{longitude:0,latitude:0,zoom:1},marker:{height:54,width:54,labels:!1,url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEeElEQVRogcWZT2hdRRTGf/cRQhYhBAmlhC5CkRBCKCEqVBcSShTRLkSKiJQiLooLF+JCgohQXHThyoVIESkSsuiqiBTRIiolipQS/NcWJG0lVKvV1lBriGnO52LmNjc3d+579915fQeGN+/CzHzfme/MPXNuQk2T+xkAdgOjwEPAFDDsnwP8C1wDvgfOAueBS8CNBKwuhrZNMGhwwOCYYMlgXaB8s63/NwRXBfMGL8oR7Qr4CYNTBr97UNuAlzVz7abBgmBG0LhXwHcKjhjczHs31G+h3TZ435wEOwp+h2BecDsi+LStCz4XjHcS/HEFdB6xfRqdhJfNXChIfVs1uOB36KBgSrBLMGwuXp6RC/ZzBitNdu0LwVg0AgZvpLIJtF8MXhfsEfSUOKIhGBEcNlgsCf4NwYdRAlswZvBXaCGDrwT7BL0V5mwIJv1urQV2Y9Vgf13wAwYnbfPYy3vpuGBnjfn7BG8arBXJyZzcRuoQ2C+4GjhVztQBnyVhTi7b5GRwy+DlMlmWTdwveCeg02XBTF3wmbUmBN8GAvqjthwlGBf8VOCVNYMjVTTfzMytdyiNNdsqoxXBdGhsWZTvFtxf8PxKAh8n8F9d4DkQnwEXBSS++f4A8GCTsYU2mXgva+vz87isMrZdS+DLJPMg0384NKiMwAMFE5HA6Zjez61xCpzDUqf5/mRoXBmBUOBcrIyudSuSEJSk3EECgv5MP2t/1EHYxP5O4E76J9n87QsNCJ6vAS3eE0sdlmz2g7e2shfEjcDzoXZAtWgDgp7UYRkJ/RMaUBYDl9JOTkKdvHSMFu28MljyVkZgIT+Rn+yxmC+xzLwAT6X97CmUwNehcWVB/KPgz/zzBCbozK1pCJguOIXuAGdCg4IEEvg18S+snIRGgCfaSrAC5iN0HzBeIKErci/PaiboEcwKVgvy9SXBo7WRezMYlbtX5POuDcF72qwvVSaxV/BzJrHKLnBacF8E8L0e5HrBneC64Dk1nyZIoE8wV5BOpxead+uQ8OBflSurFN2PFwx2tDt/SmLCwgtsCD4RPFIlJnz6PC53yV8tcdCBWuAzJE4UxMHdX4MLBq/IabnsZEMwLFe1WAjIJm2LKkkhqhKYlqtnBus5BrcE33mvPi0YNRiUe7uOCB4XvC34RpmLSxF4c7tyKAp4T6BP8FbgRGrar9J87WlOsVMWwZjgbBXgbfYvy5Vp4ppBw5x22/Fqlf7RaNoPEJm3TKUipoTM7XDnwHsCk4LFDkhoWXUrca2YoNfgsMLlxnYktOql098cQRwSPYKj5mqjMSR0QhHSkqokhvznoboSuqyYpfSKJGY8gHYltGLwQlfAewINuWzxt6oS8oXb1zp+6rRAok8wW5Ryl/UNPlBnCwStm1y+c7KChH5Qt74Ph0ywy1wpfD0kIf8CPCfY022820yuTcllmyHZLAmeVMT7dFTzQb3X/EfwHJF1g2fVgZJMdJPL/ZcyJK4LXuo2rpbN33WfFyz73ZhVu5WFbpk/Xg/KfYUc7NQ6/wPXO1op+IbpEgAAAABJRU5ErkJggg=="}},a);var p=function(e){var n=$("<div></div>");return n.addClass("aom-container"),n.attr("id",c),n.height(g.height),e.append(n),n}(u);d();try{apex.jQuery("#"+t).bind("apexrefresh",function(){0==p.children("span").length&&d()})}catch(e){console.log("Can't bind refresh event on "+t+". Apex is missing"),console.log(e)}g.refresh>0&&setInterval(function(){0==p.children("span").length&&d()},1e3*g.refresh)}else console.log("Can't find parentID: "+n)}}}();