var apexOracleOSMMaps=function(){"use strict";var e={version:"1.2.7",isDefinedAndNotNull:function(e){return void 0!==e&&null!==e},isAPEX:function(){return"undefined"!=typeof apex},debug:{info:function(r){e.isAPEX()&&apex.debug.info(r)},error:function(r){e.isAPEX()?apex.debug.error(r):console.error(r)}},link:function(e,r){if(!r)return window.location=e;window.open(e,"_blank")},loader:{start:function(r,n){if(n||$(r).css("min-height","100px"),e.isAPEX())apex.util.showSpinner($(r));else{var a=$("<span></span>");a.attr("id","loader"+r),a.addClass("ct-loader");var o=$("<i></i>");o.addClass("fa fa-refresh fa-2x fa-anim-spin"),o.css("background","rgba(121,121,121,0.6)"),o.css("border-radius","100%"),o.css("padding","15px"),o.css("color","white"),a.append(o),$(r).append(a)}},stop:function(e){$(e+" > .u-Processing").remove(),$(e+" > .ct-loader").remove()}},noDataMessage:{show:function(e,r){var n=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0").addClass("nodatafoundmessage"),a=$("<div></div>"),o=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");a.append(o);var t=$("<span></span>").text(r).css("display","block").css("color","#707070").css("font-size","12px");n.append(a).append(t),$(e).append(n)},hide:function(e){$(e).children(".nodatafoundmessage").remove()}},jsonSaveExtend:function(e,r){var n={},a={};if("string"==typeof r)try{a=JSON.parse(r)}catch(e){console.error("Error while try to parse targetConfig. Please check your Config JSON. Standard Config will be used."),console.error(e),console.error(r)}else a=r;try{n=$.extend(!0,e,a)}catch(r){console.error("Error while try to merge 2 JSONs into standard JSON if any attribute is missing. Please check your Config JSON. Standard Config will be used."),console.error(r),n=e,console.error(n)}return n}};return{initialize:function(r,n,a,o,t,i,s){function d(r){c.empty(),e.debug.info({data:r,configJSON:p});var n=p.map.longitude,a=p.map.latitude,o=p.map.zoom;if("oracle"===s)try{OM.gv.setResourcePath(i+"/jslib/v2.3/"),OM.gv.setBaseMapViewerURL(i),OM.Map.setLocale("en"),e.debug.info({map:OM});var t=new OM.universe.Universe({srid:8307,bounds:new OM.geometry.Rectangle(-180,-65,180,65,8307),numberOfZoomLevels:5}),d=document.getElementById(u),l={mapviewerURL:i,universe:t},A=new OM.Map(d,l),g=new OM.layer.ElocationTileLayer("map"),M={def:{type:OM.layer.VectorLayer.TYPE_LOCAL}},f=new OM.layer.VectorLayer("vectors",M);r.row&&r.row.length>0&&$.each(r.row,function(r,t){0===r&&(e.isDefinedAndNotNull(t.MAP_LONGITUDE)&&""!=t.MAP_LONGITUDE&&(e.debug.info({MapLongitude_o:t.MAP_LONGITUDE}),n=parseFloat(t.MAP_LONGITUDE.toString().replace(/,/,".")),e.debug.info({MapLongitude:n})),e.isDefinedAndNotNull(t.MAP_LATITUDE)&&""!=t.MAP_LATITUDE&&(e.debug.info({MapLatitude_o:t.MAP_LATITUDE}),a=parseFloat(t.MAP_LATITUDE.toString().replace(/,/,".")),e.debug.info({MapLongitude:a})),e.isDefinedAndNotNull(t.MAP_ZOOM)&&""!=t.MAP_ZOOM&&(e.debug.info({MapZoom_o:t.MAP_ZOOM}),o=parseFloat(t.MAP_ZOOM.toString().replace(/,/,".")),e.debug.info({MapZoom:o})));var i;if(e.isDefinedAndNotNull(t.MARKER_LABEL)&&(i=t.MARKER_LABEL.toString()),e.isDefinedAndNotNull(t.MARKER_LATITUDE)&&""!=t.MARKER_LATITUDE&&e.isDefinedAndNotNull(t.MARKER_LONGITUDE)&&""!=t.MARKER_LONGITUDE){e.debug.info({MarkerLongitude_o:t.MARKER_LONGITUDE,MarkerLatitude_o:t.MARKER_LATITUDE});var s=parseFloat(t.MARKER_LONGITUDE.toString().replace(/,/,".")),d=parseFloat(t.MARKER_LATITUDE.toString().replace(/,/,"."));e.debug.info({MarkerLongitude:s,MarkerLatitude:d});var l=new OM.geometry.Point(s,d),u=new OM.Feature(t.MARKER_LABEL||r,l,{label:i,renderingStyle:new OM.style.Marker({src:t.MARKER_URL||p.marker.url,width:t.MARKER_WIDTH||p.marker.width,height:t.MARKER_HEIGHT||p.marker.height})});f.addFeature(u),e.isDefinedAndNotNull(t.MARKER_LINK)&&u.addListener("click",function(){e.link(t.MARKER_LINK)})}}),f.setLabelsVisible(p.marker.labels),A.addLayer(g),r.row&&r.row.length>0&&A.addLayer(f);var L=new OM.geometry.Point(n,a,8307);A.setMapCenterAndZoomLevel(L,o,!0),A.init()}catch(r){e.debug.error("Erro while try to draw Oracle maps"),e.debug.error(r)}else try{var E=new OpenLayers.Layer.OSM.Mapnik("Mapnik");function w(e){return 20037508.34*e/180}function O(e){return 20037508.34*(e=Math.log(Math.tan(3.141592653589793*(90+e)/360))/.017453292519943295)/180}if(OpenLayers.Lang.setCode("en"),A=new OpenLayers.Map(u,{projection:new OpenLayers.Projection("EPSG:900913"),displayProjection:new OpenLayers.Projection("EPSG:4326"),maxExtent:new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),numZoomLevels:18,maxResolution:156543,units:"meters"}),r.row&&r.row.length>0)$.each(r.row,function(r,t){0===r&&(e.isDefinedAndNotNull(t.MAP_LONGITUDE)&&""!=t.MAP_LONGITUDE&&(e.debug.info({MapLongitude_o:t.MAP_LONGITUDE}),n=parseFloat(t.MAP_LONGITUDE.toString().replace(/,/,".")),e.debug.info({MapLongitude:n})),e.isDefinedAndNotNull(t.MAP_LATITUDE)&&""!=t.MAP_LATITUDE&&(e.debug.info({MapLatitude_o:t.MAP_LATITUDE}),a=parseFloat(t.MAP_LATITUDE.toString().replace(/,/,".")),e.debug.info({MapLongitude:a})),e.isDefinedAndNotNull(t.MAP_ZOOM)&&""!=t.MAP_ZOOM&&(e.debug.info({MapZoom_o:t.MAP_ZOOM}),o=parseFloat(t.MAP_ZOOM.toString().replace(/,/,".")),e.debug.info({MapZoom:o})));var i=new OpenLayers.Layer.Markers("Address",{projection:new OpenLayers.Projection("EPSG:4326"),visibility:!0,displayInLayerSwitcher:!1});if(e.isDefinedAndNotNull(t.MARKER_LATITUDE)&&""!=t.MARKER_LATITUDE&&e.isDefinedAndNotNull(t.MARKER_LONGITUDE)&&""!=t.MARKER_LONGITUDE){e.debug.info({MarkerLongitude_o:t.MARKER_LONGITUDE,MarkerLatitude_o:t.MARKER_LATITUDE});var s=parseFloat(t.MARKER_LONGITUDE.toString().replace(/,/,".")),d=parseFloat(t.MARKER_LATITUDE.toString().replace(/,/,"."));e.debug.info({MarkerLongitude:s,MarkerLatitude:d}),function(r,n,a,o,t,i,s,d){var l=new OpenLayers.LonLat(w(n),O(a)),u=t||p.marker.width,A=i||p.marker.height,c=new OpenLayers.Size(u,A),g=new OpenLayers.Pixel(-c.w/2,-c.h),M=o||p.marker.url,f=new OpenLayers.Icon(M,c,g),L=new OpenLayers.Feature(r,l),E=new OpenLayers.Marker(l,f);e.isDefinedAndNotNull(d)&&(E.icon.imageDiv.title=d),E.feature=L,r.addMarker(E),e.isDefinedAndNotNull(s)&&E.events.register("click",r,function(){e.link(s)})}(i,s,d,t.MARKER_URL,t.MARKER_WIDTH,t.MARKER_HEIGHT,t.MARKER_LINK,t.MARKER_LABEL)}A.addLayers([E,i])});else{e.debug.info("No SQL Data loaded.");var h=new OpenLayers.Layer.Markers("Address",{projection:new OpenLayers.Projection("EPSG:4326"),visibility:!0,displayInLayerSwitcher:!1});A.addLayers([E,h])}var R=w(n),y=O(a);A.setCenter(new OpenLayers.LonLat(R,y),o+1),c.find(".olControlAttribution").css("bottom","5px")}catch(r){e.debug.error("Erro while try to draw OpenStreetMaps"),e.debug.error(r)}}function l(){e.loader.start(c);var r=o;apex.server.plugin(n,{pageItems:r},{success:d,error:function(r){c.empty(),console.log(r.responseText),e.noDataMessage.show("#"+u,"Error occured!")},dataType:"json"})}var u=r+"-c",A=$("#"+r);if(A.length>0){var p={};p=e.jsonSaveExtend({refresh:0,height:"600px",map:{longitude:0,latitude:0,zoom:1},marker:{height:54,width:54,labels:!1,url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAEeElEQVRogcWZT2hdRRTGf/cRQhYhBAmlhC5CkRBCKCEqVBcSShTRLkSKiJQiLooLF+JCgohQXHThyoVIESkSsuiqiBTRIiolipQS/NcWJG0lVKvV1lBriGnO52LmNjc3d+579915fQeGN+/CzHzfme/MPXNuQk2T+xkAdgOjwEPAFDDsnwP8C1wDvgfOAueBS8CNBKwuhrZNMGhwwOCYYMlgXaB8s63/NwRXBfMGL8oR7Qr4CYNTBr97UNuAlzVz7abBgmBG0LhXwHcKjhjczHs31G+h3TZ435wEOwp+h2BecDsi+LStCz4XjHcS/HEFdB6xfRqdhJfNXChIfVs1uOB36KBgSrBLMGwuXp6RC/ZzBitNdu0LwVg0AgZvpLIJtF8MXhfsEfSUOKIhGBEcNlgsCf4NwYdRAlswZvBXaCGDrwT7BL0V5mwIJv1urQV2Y9Vgf13wAwYnbfPYy3vpuGBnjfn7BG8arBXJyZzcRuoQ2C+4GjhVztQBnyVhTi7b5GRwy+DlMlmWTdwveCeg02XBTF3wmbUmBN8GAvqjthwlGBf8VOCVNYMjVTTfzMytdyiNNdsqoxXBdGhsWZTvFtxf8PxKAh8n8F9d4DkQnwEXBSS++f4A8GCTsYU2mXgva+vz87isMrZdS+DLJPMg0384NKiMwAMFE5HA6Zjez61xCpzDUqf5/mRoXBmBUOBcrIyudSuSEJSk3EECgv5MP2t/1EHYxP5O4E76J9n87QsNCJ6vAS3eE0sdlmz2g7e2shfEjcDzoXZAtWgDgp7UYRkJ/RMaUBYDl9JOTkKdvHSMFu28MljyVkZgIT+Rn+yxmC+xzLwAT6X97CmUwNehcWVB/KPgz/zzBCbozK1pCJguOIXuAGdCg4IEEvg18S+snIRGgCfaSrAC5iN0HzBeIKErci/PaiboEcwKVgvy9SXBo7WRezMYlbtX5POuDcF72qwvVSaxV/BzJrHKLnBacF8E8L0e5HrBneC64Dk1nyZIoE8wV5BOpxead+uQ8OBflSurFN2PFwx2tDt/SmLCwgtsCD4RPFIlJnz6PC53yV8tcdCBWuAzJE4UxMHdX4MLBq/IabnsZEMwLFe1WAjIJm2LKkkhqhKYlqtnBus5BrcE33mvPi0YNRiUe7uOCB4XvC34RpmLSxF4c7tyKAp4T6BP8FbgRGrar9J87WlOsVMWwZjgbBXgbfYvy5Vp4ppBw5x22/Fqlf7RaNoPEJm3TKUipoTM7XDnwHsCk4LFDkhoWXUrca2YoNfgsMLlxnYktOql098cQRwSPYKj5mqjMSR0QhHSkqokhvznoboSuqyYpfSKJGY8gHYltGLwQlfAewINuWzxt6oS8oXb1zp+6rRAok8wW5Ryl/UNPlBnCwStm1y+c7KChH5Qt74Ph0ywy1wpfD0kIf8CPCfY022820yuTcllmyHZLAmeVMT7dFTzQb3X/EfwHJF1g2fVgZJMdJPL/ZcyJK4LXuo2rpbN33WfFyz73ZhVu5WFbpk/Xg/KfYUc7NQ6/wPXO1op+IbpEgAAAABJRU5ErkJggg=="}},a);var c=function(e){var r=$("<div></div>");return r.addClass("aom-container"),r.attr("id",u),r.height(p.height),e.append(r),r}(A);l();try{apex.jQuery("#"+t).bind("apexrefresh",function(){0==c.children("span").length&&l()})}catch(e){console.log("Can't bind refresh event on "+t+". Apex is missing"),console.log(e)}p.refresh>0&&setInterval(function(){0==c.children("span").length&&l()},1e3*p.refresh)}else console.log("Can't find parentID: "+r)}}}();